{% comment %}
  Product Template - Converted from ProductDetailPage.jsx
{% endcomment %}

<div class="min-h-screen bg-white" style="width: 100%; max-width: 100vw; overflow-x: hidden;">
  <div class="a17-grid__right">
      <div class="home-main homepage">
        {% comment %} Product Section {% endcomment %}
        {% comment %} Free Shipping Countdown Timer {% endcomment %}
        <div class="o-product__shipping-timer">
          <p class="o-product__shipping-timer-text">FREE SHIPPING ON ALL ORDERS FOR NEXT <span data-shipping-countdown></span></p>
        </div>

        <section class="o-product product-detail" data-pid="{{ product.id }}">
          <div class="o-product__product">
            {% comment %} Product Gallery {% endcomment %}
            {% render 'product-gallery', product: product %}

            {% comment %} Product Header {% endcomment %}
            <div class="o-product__header" data-oproductscroll-header="">
              <div class="o-product__header-meta">
                <div class="o-product__header-titles">
                  <h1 class="o-product__title f-body">
                    <span class="o-product__title-truncate f-body">{{ product.title }}</span>
                  </h1>
                  <p class="f-body--em">
                    <span class="prices">
                      <strong data-description="value" class="f-body--em">
                        {{ product.price | money }} {{ cart.currency.iso_code }}
                      </strong>
                    </span>
                  </p>
                </div>
              </div>
            </div>

            {% comment %} Product Content {% endcomment %}
            <div class="o-product__content" data-oproductscroll-content="">
              <form class="o-form o-form--selectors s-appears-complete" id="form-product" action="{{ routes.cart_add_url }}" method="post" enctype="multipart/form-data" data-product-form>
                {% comment %} Hidden input for variant ID - will be updated by JavaScript when size/color changes {% endcomment %}
                <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" data-variant-id>
                {% render 'product-selectors', product: product %}

                {% comment %} Add to Bag Button - After Size Selection {% endcomment %}
                <div class="a11y" aria-live="polite" id="add-to-cart-live" role="status"></div>
                
                <div class="prices-add-to-cart-actions o-product__action-ctas">
                  {% comment %} Add to Bag Button {% endcomment %}
                  <button
                    class="add-to-cart a-btn"
                    type="submit"
                    data-add-to-cart
                    data-default-text="ADD TO BAG"
                    data-result-text="ADDED"
                  >
                    ADD TO BAG
                  </button>
                </div>

                {% comment %} Terms of Service {% endcomment %}
                <p class="f-body a-text a-text--secondary a-text--apple-pay-notice">
                  BY PLACING YOUR ORDER YOU AGREE TO THE
                  <a href="/pages/terms-of-service" class="policy-link link--on-gray-bg" target="_blank" rel="noopener noreferrer">
                    TERMS OF SERVICE
                  </a>
                </p>

                {% comment %} Estimated Delivery Date - auto calculated 5 business days from today {% endcomment %}
                <div class="o-product__delivery-info">
                  <p class="f-body--em">
                    ESTIMATED DELIVERY DATE: STARTING FROM <span id="estimated-delivery-date"></span>
                  </p>
                </div>
                <script>
                  (function() {
                    var today = new Date();
                    var daysAdded = 0;
                    var date = new Date(today);
                    while (daysAdded < 5) {
                      date.setDate(date.getDate() + 1);
                      var day = date.getDay();
                      if (day !== 0 && day !== 6) daysAdded++;
                    }
                    var days = ['SUNDAY','MONDAY','TUESDAY','WEDNESDAY','THURSDAY','FRIDAY','SATURDAY'];
                    var months = ['JANUARY','FEBRUARY','MARCH','APRIL','MAY','JUNE','JULY','AUGUST','SEPTEMBER','OCTOBER','NOVEMBER','DECEMBER'];
                    var el = document.getElementById('estimated-delivery-date');
                    if (el) el.textContent = days[date.getDay()] + ' ' + months[date.getMonth()] + ' ' + date.getDate();
                  })();
                </script>

                {% comment %} Expandable Sections {% endcomment %}
                <div class="o-product__info-sections">
                  {% render 'product-info-section', title: 'DETAILS', content: product.description %}
                </div>

                {% comment %} Information Links {% endcomment %}
                <div class="o-product__info-links">
                  <a href="#returns" class="o-product__info-link">
                    RETURNS AND EXCHANGES (WITHIN 14 DAYS) &gt;
                  </a>
                </div>

                {% comment %} You May Also Like Section {% endcomment %}
                {% if recommendations.products_count > 0 %}
                  <div class="o-product__related">
                    <h3 class="o-product__related-title f-body--em">YOU MAY ALSO LIKE</h3>
                    <div class="o-product__related-products">
                      {% for recommendation in recommendations.products limit: 2 %}
                        {% render 'related-product', product: recommendation %}
                      {% endfor %}
                    </div>
                  </div>
                {% endif %}
              </form>
            </div>
          </div>
        </section>
      </div>
    </div>

  {% comment %} Drawer Overlay - Slides up from bottom {% endcomment %}
  {% render 'product-drawer-overlay', product: product %}
  </div>
</div>
